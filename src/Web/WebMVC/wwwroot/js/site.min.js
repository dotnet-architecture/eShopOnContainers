/** 
 * @overview ASP.NET Core SignalR JavaScript Client.
 * @version 1.0.3.
 * @license
 * Copyright (c) .NET Foundation. All rights reserved.
 * Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.
 */
(function(n,t){typeof exports=="object"&&typeof module!="undefined"?module.exports=t():typeof define=="function"&&define.amd?define(t):n.signalR=t()})(this,function(){"use strict";function rt(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs");}function e(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n["default"]:n}function f(n,t){return t={exports:{}},n(t,t.exports),t.exports}function ot(n,t){function i(){this.constructor=n}ut(n,t);n.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}function st(n,t){var u={},r;for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(u[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&(u[i[r]]=n[i[r]]);return u}function ht(n,t,i,r){var f=arguments.length,u=f<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,i):r,e,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(n,t,i,r);else for(o=n.length-1;o>=0;o--)(e=n[o])&&(u=(f<3?e(u):f>3?e(t,i,u):e(t,i))||u);return f>3&&u&&Object.defineProperty(t,i,u),u}function ct(n,t){return function(i,r){t(i,r,n)}}function lt(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)}function at(n,t,i,r){return new(i||(i=Promise))(function(u,f){function o(n){try{e(r.next(n))}catch(t){f(t)}}function s(n){try{e(r["throw"](n))}catch(t){f(t)}}function e(n){n.done?u(n.value):new i(function(t){t(n.value)}).then(o,s)}e((r=r.apply(n,t||[])).next())})}function vt(n,t){function o(n){return function(t){return s([n,t])}}function s(e){if(f)throw new TypeError("Generator is already executing.");while(r)try{if(f=1,u&&(i=u[e[0]&2?"return":e[0]?"throw":"next"])&&!(i=i.call(u,e[1])).done)return i;(u=0,i)&&(e=[0,i.value]);switch(e[0]){case 0:case 1:i=e;break;case 4:return r.label++,{value:e[1],done:!1};case 5:r.label++;u=e[1];e=[0];continue;case 7:e=r.ops.pop();r.trys.pop();continue;default:if(!(i=r.trys,i=i.length>0&&i[i.length-1])&&(e[0]===6||e[0]===2)){r=0;continue}if(e[0]===3&&(!i||e[1]>i[0]&&e[1]<i[3])){r.label=e[1];break}if(e[0]===6&&r.label<i[1]){r.label=i[1];i=e;break}if(i&&r.label<i[2]){r.label=i[2];r.ops.push(e);break}i[2]&&r.ops.pop();r.trys.pop();continue}e=t.call(n,r)}catch(o){e=[6,o];u=0}finally{f=i=0}if(e[0]&5)throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},f,u,i,e;return e={next:o(0),"throw":o(1),"return":o(2)},typeof Symbol=="function"&&(e[Symbol.iterator]=function(){return this}),e}function yt(n,t){for(var i in n)t.hasOwnProperty(i)||(t[i]=n[i])}function tt(n){var t=typeof Symbol=="function"&&n[Symbol.iterator],i=0;return t?t.call(n):{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}}}function et(n,t){var i=typeof Symbol=="function"&&n[Symbol.iterator],r,u,f,e;if(!i)return n;r=i.call(n);f=[];try{while((t===void 0||t-->0)&&!(u=r.next()).done)f.push(u.value)}catch(o){e={error:o}}finally{try{u&&!u.done&&(i=r["return"])&&i.call(r)}finally{if(e)throw e.error;}}return f}function pt(){for(var n=[],t=0;t<arguments.length;t++)n=n.concat(et(arguments[t]));return n}function a(n){return this instanceof a?(this.v=n,this):new a(n)}function wt(n,t,i){function e(n){o[n]&&(u[n]=function(t){return new Promise(function(i,u){r.push([n,t,i,u])>1||f(n,t)})})}function f(n,t){try{h(o[n](t))}catch(i){s(r[0][3],i)}}function h(n){n.value instanceof a?Promise.resolve(n.value.v).then(c,l):s(r[0][2],n)}function c(n){f("next",n)}function l(n){f("throw",n)}function s(n,t){(n(t),r.shift(),r.length)&&f(r[0][0],r[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=i.apply(n,t||[]),u,r=[];return u={},e("next"),e("throw"),e("return"),u[Symbol.asyncIterator]=function(){return this},u}function bt(n){function i(i,u){n[i]&&(t[i]=function(t){return(r=!r)?{value:a(n[i](t)),done:i==="return"}:u?u(t):t})}var t,r;return t={},i("next"),i("throw",function(n){throw n;}),i("return"),t[Symbol.iterator]=function(){return this},t}function kt(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=n[Symbol.asyncIterator];return t?t.call(n):typeof tt=="function"?tt(n):n[Symbol.iterator]()}function dt(n,t){return Object.defineProperty?Object.defineProperty(n,"raw",{value:t}):n.raw=t,n}function gt(n){var t,i;if(n&&n.__esModule)return n;if(t={},n!=null)for(i in n)Object.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t.default=n,t}function ni(n){return n&&n.__esModule?n:{"default":n}}var nt=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},ut,ft,ti,h,ii,p,ri,u,ui,l,fi,i,ei,r,oi,v,si,b,hi,k,ci,d,li,y,ai,g,vi,o;
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0
THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.
See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
ut=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])};ft=Object.assign||function(n){for(var t,r,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n};var t=Object.freeze({__extends:ot,__assign:ft,__rest:st,__decorate:ht,__param:ct,__metadata:lt,__awaiter:at,__generator:vt,__exportStar:yt,__values:tt,__read:et,__spread:pt,__await:a,__asyncGenerator:wt,__asyncDelegator:bt,__asyncValues:kt,__makeTemplateObject:dt,__importStar:gt,__importDefault:ni}),pi=f(function(n){
/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.2+97478eb6
 */
(function(t,i){n.exports=i()})(nt,function(){function bt(n){var t=typeof n;return n!==null&&(t==="object"||t==="function")}function ft(n){return typeof n=="function"}function kt(n){w=n}function dt(n){r=n}function ti(){return function(){return process.nextTick(e)}}function ii(){return typeof p!="undefined"?function(){p(e)}:b()}function ri(){var n=0,i=new ct(e),t=document.createTextNode("");return i.observe(t,{characterData:!0}),function(){t.data=n=++n%2}}function ui(){var n=new MessageChannel;return n.port1.onmessage=e,function(){return n.port2.postMessage(0)}}function b(){var n=setTimeout;return function(){return n(e,1)}}function e(){for(var t,i,n=0;n<f;n+=2)t=u[n],i=u[n+1],t(i),u[n]=undefined,u[n+1]=undefined;f=0}function fi(){try{var t=rt,n=t("vertx");return p=n.runOnLoop||n.runOnContext,ii()}catch(i){return b()}}function d(n,t){var f=this,i=new this.constructor(o),u,e;return i[c]===undefined&&pt(i),u=f._state,u?(e=arguments[u-1],r(function(){return yt(u,i,e,f._result)})):tt(f,i,n,t),i}function g(n){var i=this,t;return n&&typeof n=="object"&&n.constructor===i?n:(t=new i(o),v(t,n),t)}function o(){}function ei(){return new TypeError("You cannot resolve a promise with itself")}function oi(){return new TypeError("A promises callback cannot return that same promise.")}function lt(n){try{return n.then}catch(t){return a.error=t,a}}function si(n,t,i,r){try{n.call(t,i,r)}catch(u){return u}}function hi(n,u,f){r(function(n){var r=!1,e=si(f,u,function(t){r||(r=!0,u!==t?v(n,t):i(n,t))},function(i){r||(r=!0,t(n,i))},"Settle: "+(n._label||" unknown promise"));!r&&e&&(r=!0,t(n,e))},n)}function ci(n,r){r._state===l?i(n,r._result):r._state===h?t(n,r._result):tt(r,undefined,function(t){return v(n,t)},function(i){return t(n,i)})}function at(n,r,u){r.constructor===n.constructor&&u===d&&r.constructor.resolve===g?ci(n,r):u===a?(t(n,a.error),a.error=null):u===undefined?i(n,r):ft(u)?hi(n,r,u):i(n,r)}function v(n,r){n===r?t(n,ei()):bt(r)?at(n,r,lt(r)):i(n,r)}function li(n){n._onerror&&n._onerror(n._result);it(n)}function i(n,t){n._state===s&&(n._result=t,n._state=l,n._subscribers.length!==0&&r(it,n))}function t(n,t){n._state===s&&(n._state=h,n._result=t,r(li,n))}function tt(n,t,i,u){var f=n._subscribers,e=f.length;n._onerror=null;f[e]=t;f[e+l]=i;f[e+h]=u;e===0&&n._state&&r(it,n)}function it(n){var i=n._subscribers,f=n._state,t;if(i.length!==0){var r=void 0,u=void 0,e=n._result;for(t=0;t<i.length;t+=3)r=i[t],u=i[t+f],r?yt(f,r,u,e):u(e);n._subscribers.length=0}}function vt(){this.error=null}function ai(n,t){try{return n(t)}catch(i){return y.error=i,y}}function yt(n,r,u,f){var c=ft(u),e=void 0,a=void 0,o=void 0,p=void 0;if(c){if(e=ai(u,f),e===y?(p=!0,a=e.error,e.error=null):o=!0,r===e){t(r,oi());return}}else e=f,o=!0;r._state!==s||(c&&o?v(r,e):p?t(r,a):n===l?i(r,e):n===h&&t(r,e))}function vi(n,i){try{i(function(t){v(n,t)},function(i){t(n,i)})}catch(r){t(n,r)}}function yi(){return ut++}function pt(n){n[c]=ut++;n._state=undefined;n._result=undefined;n._subscribers=[]}function pi(){return new Error("Array Methods must be provided an Array")}function pi(){return new Error("Array Methods must be provided an Array")}function wi(n){return new wt(this,n).promise}function bi(n){var t=this;return ot(n)?new t(function(i,r){for(var f=n.length,u=0;u<f;u++)t.resolve(n[u]).then(i,r)}):new t(function(n,t){return t(new TypeError("You must pass an array to race."))})}function ki(n){var r=this,i=new r(o);return t(i,n),i}function di(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");}function gi(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");}function nr(){var t=void 0,i,r;if(typeof nt!="undefined")t=nt;else if(typeof self!="undefined")t=self;else try{t=Function("return this")()}catch(u){throw new Error("polyfill failed because global object is unavailable in this environment");}if(i=t.Promise,i){r=null;try{r=Object.prototype.toString.call(i.resolve())}catch(u){}if(r==="[object Promise]"&&!i.cast)return}t.Promise=n}var et=void 0,u,k,c,y,ut,wt,n;et=Array.isArray?Array.isArray:function(n){return Object.prototype.toString.call(n)==="[object Array]"};var ot=et,f=0,p=void 0,w=void 0,r=function(n,t){u[f]=n;u[f+1]=t;f+=2;f===2&&(w?w(e):k())};var st=typeof window!="undefined"?window:undefined,ht=st||{},ct=ht.MutationObserver||ht.WebKitMutationObserver,gt=typeof self=="undefined"&&typeof process!="undefined"&&{}.toString.call(process)==="[object process]",ni=typeof Uint8ClampedArray!="undefined"&&typeof importScripts!="undefined"&&typeof MessageChannel!="undefined";u=new Array(1e3);k=void 0;k=gt?ti():ct?ri():ni?ui():st===undefined&&typeof rt=="function"?fi():b();c=Math.random().toString(36).substring(16);var s=void 0,l=1,h=2,a=new vt;return y=new vt,ut=0,wt=function(){function r(n,r){this._instanceConstructor=n;this.promise=new n(o);this.promise[c]||pt(this.promise);ot(r)?(this.length=r.length,this._remaining=r.length,this._result=new Array(this.length),this.length===0?i(this.promise,this._result):(this.length=this.length||0,this._enumerate(r),this._remaining===0&&i(this.promise,this._result))):t(this.promise,pi())}return r.prototype._enumerate=function(n){for(var t=0;this._state===s&&t<n.length;t++)this._eachEntry(n[t],t)},r.prototype._eachEntry=function(t,i){var r=this._instanceConstructor,e=r.resolve,u,f;e===g?(u=lt(t),u===d&&t._state!==s?this._settledAt(t._state,i,t._result):typeof u!="function"?(this._remaining--,this._result[i]=t):r===n?(f=new r(o),at(f,t,u),this._willSettleAt(f,i)):this._willSettleAt(new r(function(n){return n(t)}),i)):this._willSettleAt(e(t),i)},r.prototype._settledAt=function(n,r,u){var f=this.promise;f._state===s&&(this._remaining--,n===h?t(f,u):this._result[r]=u);this._remaining===0&&i(f,this._result)},r.prototype._willSettleAt=function(n,t){var i=this;tt(n,undefined,function(n){return i._settledAt(l,t,n)},function(n){return i._settledAt(h,t,n)})},r}(),n=function(){function n(t){this[c]=yi();this._result=this._state=undefined;this._subscribers=[];o!==t&&(typeof t!="function"&&di(),this instanceof n?vi(this,t):gi())}return n.prototype.catch=function(n){return this.then(null,n)},n.prototype.finally=function(n){var t=this,i=t.constructor;return t.then(function(t){return i.resolve(n()).then(function(){return t})},function(t){return i.resolve(n()).then(function(){throw t;})})},n}(),n.prototype.then=d,n.all=wi,n.race=bi,n.resolve=g,n.reject=ki,n._setScheduler=kt,n._setAsap=dt,n._asap=r,n.polyfill=nr,n.Promise=n,n.polyfill(),n})}),s=f(function(n,i){var r,u;Object.defineProperty(i,"__esModule",{value:!0});r=function(n){function i(t,i){var u=this.constructor,r=this,f=u.prototype;return r=n.call(this,t)||this,r.statusCode=i,r.__proto__=f,r}return t.__extends(i,n),i}(Error);i.HttpError=r;u=function(n){function i(t){var u=this.constructor,i,r;return t===void 0&&(t="A timeout occurred."),i=this,r=u.prototype,i=n.call(this,t)||this,i.__proto__=r,i}return t.__extends(i,n),i}(Error);i.TimeoutError=u});e(s);var wi=s.HttpError,bi=s.TimeoutError,n=f(function(n,t){Object.defineProperty(t,"__esModule",{value:!0});var i;(function(n){n[n.Trace=0]="Trace";n[n.Debug=1]="Debug";n[n.Information=2]="Information";n[n.Warning=3]="Warning";n[n.Error=4]="Error";n[n.Critical=5]="Critical";n[n.None=6]="None"})(i=t.LogLevel||(t.LogLevel={}))});e(n);ti=n.LogLevel;h=f(function(i,r){var u,f,e;Object.defineProperty(r,"__esModule",{value:!0});u=function(){function n(n,t,i){this.statusCode=n;this.statusText=t;this.content=i}return n}();r.HttpResponse=u;f=function(){function n(){}return n.prototype.get=function(n,i){return this.send(t.__assign({},i,{method:"GET",url:n}))},n.prototype.post=function(n,i){return this.send(t.__assign({},i,{method:"POST",url:n}))},n.prototype.delete=function(n,i){return this.send(t.__assign({},i,{method:"DELETE",url:n}))},n}();r.HttpClient=f;e=function(i){function r(n){var t=i.call(this)||this;return t.logger=n,t}return t.__extends(r,i),r.prototype.send=function(t){var i=this;return new Promise(function(r,f){var e=new XMLHttpRequest;e.open(t.method,t.url,!0);e.withCredentials=!0;e.setRequestHeader("X-Requested-With","XMLHttpRequest");e.setRequestHeader("Content-Type","text/plain;charset=UTF-8");t.headers&&Object.keys(t.headers).forEach(function(n){return e.setRequestHeader(n,t.headers[n])});t.responseType&&(e.responseType=t.responseType);t.abortSignal&&(t.abortSignal.onabort=function(){e.abort()});t.timeout&&(e.timeout=t.timeout);e.onload=function(){t.abortSignal&&(t.abortSignal.onabort=null);e.status>=200&&e.status<300?r(new u(e.status,e.statusText,e.response||e.responseText)):f(new s.HttpError(e.statusText,e.status))};e.onerror=function(){i.logger.log(n.LogLevel.Warning,"Error from HTTP request. "+e.status+": "+e.statusText);f(new s.HttpError(e.statusText,e.status))};e.ontimeout=function(){i.logger.log(n.LogLevel.Warning,"Timeout from HTTP request.");f(new s.TimeoutError)};e.send(t.content||"")})},r}(f);r.DefaultHttpClient=e});e(h);var ki=h.HttpResponse,di=h.HttpClient,gi=h.DefaultHttpClient,c=f(function(n,t){Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function n(){}return n.write=function(t){return""+t+n.RecordSeparator},n.parse=function(t){if(t[t.length-1]!==n.RecordSeparator)throw new Error("Message is incomplete.");var i=t.split(n.RecordSeparator);return i.pop(),i},n.RecordSeparatorCode=30,n.RecordSeparator=String.fromCharCode(n.RecordSeparatorCode),n}();t.TextMessageFormat=i});e(c);ii=c.TextMessageFormat;p=f(function(n,t){Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function n(){}return n.prototype.writeHandshakeRequest=function(n){return c.TextMessageFormat.write(JSON.stringify(n))},n.prototype.parseHandshakeResponse=function(n){var o,f,e,r,u,i,t,s;if(n instanceof ArrayBuffer){if(r=new Uint8Array(n),i=r.indexOf(c.TextMessageFormat.RecordSeparatorCode),i===-1)throw new Error("Message is incomplete.");t=i+1;f=String.fromCharCode.apply(null,r.slice(0,t));e=r.byteLength>t?r.slice(t).buffer:null}else{if(u=n,i=u.indexOf(c.TextMessageFormat.RecordSeparator),i===-1)throw new Error("Message is incomplete.");t=i+1;f=u.substring(0,t);e=u.length>t?u.substring(t):null}return s=c.TextMessageFormat.parse(f),o=JSON.parse(s[0]),[e,o]},n}();t.HandshakeProtocol=i});e(p);ri=p.HandshakeProtocol;u=f(function(n,t){Object.defineProperty(t,"__esModule",{value:!0});var i;(function(n){n[n.Invocation=1]="Invocation";n[n.StreamItem=2]="StreamItem";n[n.Completion=3]="Completion";n[n.StreamInvocation=4]="StreamInvocation";n[n.CancelInvocation=5]="CancelInvocation";n[n.Ping=6]="Ping";n[n.Close=7]="Close"})(i=t.MessageType||(t.MessageType={}))});e(u);ui=u.MessageType;l=f(function(n,t){Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function n(){}return n.prototype.log=function(){},n.instance=new n,n}();t.NullLogger=i});e(l);fi=l.NullLogger;i=f(function(i,r){function o(n,t){var i=null;return n instanceof ArrayBuffer?(i="Binary data of length "+n.byteLength,t&&(i+=". Content: '"+s(n)+"'")):typeof n=="string"&&(i="String data of length "+n.length,t&&(i+=". Content: '"+n+"'.")),i}function s(n){var i=new Uint8Array(n),t="";return i.forEach(function(n){var i=n<16?"0":"";t+="0x"+i+n.toString(16)+" "}),t.substr(0,t.length-1)}function c(i,r,u,f,e,s,h){return t.__awaiter(this,void 0,void 0,function(){var a,c,v,l;return t.__generator(this,function(t){switch(t.label){case 0:return[4,e()];case 1:return c=t.sent(),c&&(a=(l={},l.Authorization="Bearer "+c,l)),i.log(n.LogLevel.Trace,"("+r+" transport) sending data. "+o(s,h)+"."),[4,u.post(f,{content:s,headers:a})];case 2:return v=t.sent(),i.log(n.LogLevel.Trace,"("+r+" transport) request complete. Response status: "+v.statusCode+"."),[2]}})})}function a(t){return t===undefined?new u(n.LogLevel.Information):t===null?l.NullLogger.instance:t.log?t:new u(t)}var e,h,f,u;Object.defineProperty(r,"__esModule",{value:!0});e=function(){function n(){}return n.isRequired=function(n,t){if(n===null||n===undefined)throw new Error("The '"+t+"' argument is required.");},n.isIn=function(n,t,i){if(!(n in t))throw new Error("Unknown "+i+" value: "+n+".");},n}();r.Arg=e;r.getDataDetail=o;r.formatArrayBuffer=s;r.sendMessage=c;r.createLogger=a;h=function(){function n(n){this.observers=[];this.cancelCallback=n}return n.prototype.next=function(n){for(var r,t=0,i=this.observers;t<i.length;t++)r=i[t],r.next(n)},n.prototype.error=function(n){for(var r,t=0,i=this.observers;t<i.length;t++)r=i[t],r.error&&r.error(n)},n.prototype.complete=function(){for(var i,n=0,t=this.observers;n<t.length;n++)i=t[n],i.complete&&i.complete()},n.prototype.subscribe=function(n){return this.observers.push(n),new f(this,n)},n}();r.Subject=h;f=function(){function n(n,t){this.subject=n;this.observer=t}return n.prototype.dispose=function(){var n=this.subject.observers.indexOf(this.observer);n>-1&&this.subject.observers.splice(n,1);this.subject.observers.length===0&&this.subject.cancelCallback().catch(function(){})},n}();r.SubjectSubscription=f;u=function(){function t(n){this.minimumLogLevel=n}return t.prototype.log=function(t,i){if(t>=this.minimumLogLevel)switch(t){case n.LogLevel.Critical:case n.LogLevel.Error:console.error(n.LogLevel[t]+": "+i);break;case n.LogLevel.Warning:console.warn(n.LogLevel[t]+": "+i);break;case n.LogLevel.Information:console.info(n.LogLevel[t]+": "+i);break;default:console.log(n.LogLevel[t]+": "+i)}},t}();r.ConsoleLogger=u});e(i);var nr=i.Arg,tr=i.getDataDetail,ir=i.formatArrayBuffer,rr=i.sendMessage,ur=i.createLogger,fr=i.Subject,er=i.SubjectSubscription,or=i.ConsoleLogger,w=f(function(r,f){Object.defineProperty(f,"__esModule",{value:!0});var e=3e4,o=function(){function r(n,t,r){var u=this;i.Arg.isRequired(n,"connection");i.Arg.isRequired(t,"logger");i.Arg.isRequired(r,"protocol");this.serverTimeoutInMilliseconds=e;this.logger=t;this.protocol=r;this.connection=n;this.handshakeProtocol=new p.HandshakeProtocol;this.connection.onreceive=function(n){return u.processIncomingData(n)};this.connection.onclose=function(n){return u.connectionClosed(n)};this.callbacks={};this.methods={};this.closedCallbacks=[];this.id=0}return r.create=function(n,t,i){return new r(n,t,i)},r.prototype.start=function(){return t.__awaiter(this,void 0,void 0,function(){var i;return t.__generator(this,function(t){switch(t.label){case 0:return i={protocol:this.protocol.name,version:this.protocol.version},this.logger.log(n.LogLevel.Debug,"Starting HubConnection."),this.receivedHandshakeResponse=!1,[4,this.connection.start(this.protocol.transferFormat)];case 1:return t.sent(),this.logger.log(n.LogLevel.Debug,"Sending handshake request."),[4,this.connection.send(this.handshakeProtocol.writeHandshakeRequest(i))];case 2:return t.sent(),this.logger.log(n.LogLevel.Information,"Using HubProtocol '"+this.protocol.name+"'."),this.cleanupTimeout(),this.configureTimeout(),[2]}})})},r.prototype.stop=function(){return this.logger.log(n.LogLevel.Debug,"Stopping HubConnection."),this.cleanupTimeout(),this.connection.stop()},r.prototype.stream=function(n){for(var r,t,s,f=this,o=[],e=1;e<arguments.length;e++)o[e-1]=arguments[e];return r=this.createStreamInvocation(n,o),t=new i.Subject(function(){var n=f.createCancelInvocation(r.invocationId),t=f.protocol.writeMessage(n);return delete f.callbacks[r.invocationId],f.connection.send(t)}),this.callbacks[r.invocationId]=function(n,i){if(i){t.error(i);return}n.type===u.MessageType.Completion?n.error?t.error(new Error(n.error)):t.complete():t.next(n.item)},s=this.protocol.writeMessage(r),this.connection.send(s).catch(function(n){t.error(n);delete f.callbacks[r.invocationId]}),t},r.prototype.send=function(n){for(var r,u,i=[],t=1;t<arguments.length;t++)i[t-1]=arguments[t];return r=this.createInvocation(n,i,!0),u=this.protocol.writeMessage(r),this.connection.send(u)},r.prototype.invoke=function(n){for(var r,e,t=this,f=[],i=1;i<arguments.length;i++)f[i-1]=arguments[i];return r=this.createInvocation(n,f,!1),e=new Promise(function(n,i){t.callbacks[r.invocationId]=function(t,r){if(r){i(r);return}if(t.type===u.MessageType.Completion){var f=t;f.error?i(new Error(f.error)):n(f.result)}else i(new Error("Unexpected message type: "+t.type))};var f=t.protocol.writeMessage(r);t.connection.send(f).catch(function(n){i(n);delete t.callbacks[r.invocationId]})}),e},r.prototype.on=function(n,t){n&&t&&(n=n.toLowerCase(),this.methods[n]||(this.methods[n]=[]),this.methods[n].indexOf(t)===-1)&&this.methods[n].push(t)},r.prototype.off=function(n,t){var i,r;n&&(n=n.toLowerCase(),i=this.methods[n],i)&&(t?(r=i.indexOf(t),r!==-1&&(i.splice(r,1),i.length===0&&delete this.methods[n])):delete this.methods[n])},r.prototype.onclose=function(n){n&&this.closedCallbacks.push(n)},r.prototype.processIncomingData=function(t){var o,r,f,i,e;if(this.cleanupTimeout(),this.receivedHandshakeResponse||(t=this.processHandshakeResponse(t),this.receivedHandshakeResponse=!0),t)for(o=this.protocol.parseMessages(t,this.logger),r=0,f=o;r<f.length;r++){i=f[r];switch(i.type){case u.MessageType.Invocation:this.invokeClientMethod(i);break;case u.MessageType.StreamItem:case u.MessageType.Completion:e=this.callbacks[i.invocationId];e!=null&&(i.type===u.MessageType.Completion&&delete this.callbacks[i.invocationId],e(i));break;case u.MessageType.Ping:break;case u.MessageType.Close:this.logger.log(n.LogLevel.Information,"Close message received from server.");this.connection.stop(i.error?new Error("Server returned an error on close: "+i.error):null);break;default:this.logger.log(n.LogLevel.Warning,"Invalid message type: "+i.type)}}this.configureTimeout()},r.prototype.processHandshakeResponse=function(t){var r,e,u,i,f;try{f=this.handshakeProtocol.parseHandshakeResponse(t);e=f[0];r=f[1]}catch(o){i="Error parsing handshake response: "+o;this.logger.log(n.LogLevel.Error,i);u=new Error(i);this.connection.stop(u);throw u;}return r.error?(i="Server returned handshake error: "+r.error,this.logger.log(n.LogLevel.Error,i),this.connection.stop(new Error(i))):this.logger.log(n.LogLevel.Debug,"Server handshake complete."),e},r.prototype.configureTimeout=function(){var n=this;this.connection.features&&this.connection.features.inherentKeepAlive||(this.timeoutHandle=setTimeout(function(){return n.serverTimeout()},this.serverTimeoutInMilliseconds))},r.prototype.serverTimeout=function(){this.connection.stop(new Error("Server timeout elapsed without receiving a message from the server."))},r.prototype.invokeClientMethod=function(t){var u=this,r=this.methods[t.target.toLowerCase()],i;r?(r.forEach(function(n){return n.apply(u,t.arguments)}),t.invocationId&&(i="Server requested a response, which is not supported in this version of the client.",this.logger.log(n.LogLevel.Error,i),this.connection.stop(new Error(i)))):this.logger.log(n.LogLevel.Warning,"No client method with the name '"+t.target+"' found.")},r.prototype.connectionClosed=function(n){var i=this,t=this.callbacks;this.callbacks={};Object.keys(t).forEach(function(i){var r=t[i];r(undefined,n?n:new Error("Invocation canceled due to connection being closed."))});this.cleanupTimeout();this.closedCallbacks.forEach(function(t){return t.apply(i,[n])})},r.prototype.cleanupTimeout=function(){this.timeoutHandle&&clearTimeout(this.timeoutHandle)},r.prototype.createInvocation=function(n,t,i){if(i)return{arguments:t,target:n,type:u.MessageType.Invocation};var r=this.id;return this.id++,{arguments:t,invocationId:r.toString(),target:n,type:u.MessageType.Invocation}},r.prototype.createStreamInvocation=function(n,t){var i=this.id;return this.id++,{arguments:t,invocationId:i.toString(),target:n,type:u.MessageType.StreamInvocation}},r.prototype.createCancelInvocation=function(n){return{invocationId:n,type:u.MessageType.CancelInvocation}},r}();f.HubConnection=o});e(w);ei=w.HubConnection;r=f(function(n,t){var i,r;Object.defineProperty(t,"__esModule",{value:!0}),function(n){n[n.None=0]="None";n[n.WebSockets=1]="WebSockets";n[n.ServerSentEvents=2]="ServerSentEvents";n[n.LongPolling=4]="LongPolling"}(i=t.HttpTransportType||(t.HttpTransportType={})),function(n){n[n.Text=1]="Text";n[n.Binary=2]="Binary"}(r=t.TransferFormat||(t.TransferFormat={}))});e(r);var sr=r.HttpTransportType,hr=r.TransferFormat,it=f(function(n,t){Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function n(){this.isAborted=!1}return n.prototype.abort=function(){this.isAborted||(this.isAborted=!0,this.onabort&&this.onabort())},Object.defineProperty(n.prototype,"signal",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"aborted",{get:function(){return this.isAborted},enumerable:!0,configurable:!0}),n}();t.AbortController=i});e(it);oi=it.AbortController;v=f(function(u,f){Object.defineProperty(f,"__esModule",{value:!0});var e=5e3,o=function(){function u(n,t,i,r,u){this.httpClient=n;this.accessTokenFactory=t||function(){return null};this.logger=i;this.pollAbort=new it.AbortController;this.logMessageContent=r;this.shutdownTimeout=u||e}return Object.defineProperty(u.prototype,"pollAborted",{get:function(){return this.pollAbort.aborted},enumerable:!0,configurable:!0}),u.prototype.connect=function(u,f){return t.__awaiter(this,void 0,void 0,function(){var e,c,l,h,o;return t.__generator(this,function(t){switch(t.label){case 0:if(i.Arg.isRequired(u,"url"),i.Arg.isRequired(f,"transferFormat"),i.Arg.isIn(f,r.TransferFormat,"transferFormat"),this.url=u,this.logger.log(n.LogLevel.Trace,"(LongPolling transport) Connecting"),f===r.TransferFormat.Binary&&typeof(new XMLHttpRequest).responseType!="string")throw new Error("Binary protocols over XmlHttpRequest not implementing advanced features are not supported.");return e={abortSignal:this.pollAbort.signal,headers:{},timeout:9e4},f===r.TransferFormat.Binary&&(e.responseType="arraybuffer"),[4,this.accessTokenFactory()];case 1:return c=t.sent(),this.updateHeaderToken(e,c),h=u+"&_="+Date.now(),this.logger.log(n.LogLevel.Trace,"(LongPolling transport) polling: "+h),[4,this.httpClient.get(h,e)];case 2:return o=t.sent(),o.statusCode!==200?(this.logger.log(n.LogLevel.Error,"(LongPolling transport) Unexpected response code: "+o.statusCode),l=new s.HttpError(o.statusText,o.statusCode),this.running=!1):this.running=!0,this.poll(this.url,e,l),[2,Promise.resolve()]}})})},u.prototype.updateHeaderToken=function(n,t){if(t){n.headers.Authorization="Bearer "+t;return}n.headers.Authorization&&delete n.headers.Authorization},u.prototype.poll=function(r,u,f){return t.__awaiter(this,void 0,void 0,function(){var c,h,e,o;return t.__generator(this,function(t){switch(t.label){case 0:t.trys.push([0,,8,9]);t.label=1;case 1:return this.running?[4,this.accessTokenFactory()]:[3,7];case 2:c=t.sent();this.updateHeaderToken(u,c);t.label=3;case 3:return t.trys.push([3,5,,6]),h=r+"&_="+Date.now(),this.logger.log(n.LogLevel.Trace,"(LongPolling transport) polling: "+h),[4,this.httpClient.get(h,u)];case 4:if(e=t.sent(),e.statusCode===204)this.logger.log(n.LogLevel.Information,"(LongPolling transport) Poll terminated by server"),this.running=!1;else if(e.statusCode!==200)this.logger.log(n.LogLevel.Error,"(LongPolling transport) Unexpected response code: "+e.statusCode),f=new s.HttpError(e.statusText,e.statusCode),this.running=!1;else if(e.content){if(this.logger.log(n.LogLevel.Trace,"(LongPolling transport) data received. "+i.getDataDetail(e.content,this.logMessageContent)),this.onreceive)this.onreceive(e.content)}else this.logger.log(n.LogLevel.Trace,"(LongPolling transport) Poll timed out, reissuing.");return[3,6];case 5:return o=t.sent(),this.running?o instanceof s.TimeoutError?this.logger.log(n.LogLevel.Trace,"(LongPolling transport) Poll timed out, reissuing."):(f=o,this.running=!1):this.logger.log(n.LogLevel.Trace,"(LongPolling transport) Poll errored after shutdown: "+o.message),[3,6];case 6:return[3,1];case 7:return[3,9];case 8:if(this.stopped=!0,this.shutdownTimer&&clearTimeout(this.shutdownTimer),this.onclose){this.logger.log(n.LogLevel.Trace,"(LongPolling transport) Firing onclose event. Error: "+(f||"<undefined>"));this.onclose(f)}return this.logger.log(n.LogLevel.Trace,"(LongPolling transport) Transport finished."),[7];case 9:return[2]}})})},u.prototype.send=function(n){return t.__awaiter(this,void 0,void 0,function(){return t.__generator(this,function(){return this.running?[2,i.sendMessage(this.logger,"LongPolling",this.httpClient,this.url,this.accessTokenFactory,n,this.logMessageContent)]:[2,Promise.reject(new Error("Cannot send until the transport is connected"))]})})},u.prototype.stop=function(){return t.__awaiter(this,void 0,void 0,function(){var r=this,i,u,f;return t.__generator(this,function(t){switch(t.label){case 0:return t.trys.push([0,,3,4]),this.running=!1,this.logger.log(n.LogLevel.Trace,"(LongPolling transport) sending DELETE request to "+this.url+"."),i={headers:{}},[4,this.accessTokenFactory()];case 1:return u=t.sent(),this.updateHeaderToken(i,u),[4,this.httpClient.delete(this.url,i)];case 2:return f=t.sent(),this.logger.log(n.LogLevel.Trace,"(LongPolling transport) DELETE request accepted."),[3,4];case 3:return this.stopped||(this.shutdownTimer=setTimeout(function(){r.logger.log(n.LogLevel.Warning,"(LongPolling transport) server did not terminate after DELETE request, canceling poll.");r.pollAbort.abort()},this.shutdownTimeout)),[7];case 4:return[2]}})})},u}();f.LongPollingTransport=o});e(v);si=v.LongPollingTransport;b=f(function(u,f){Object.defineProperty(f,"__esModule",{value:!0});var e=function(){function u(n,t,i,r){this.httpClient=n;this.accessTokenFactory=t||function(){return null};this.logger=i;this.logMessageContent=r}return u.prototype.connect=function(u,f){return t.__awaiter(this,void 0,void 0,function(){var e=this,o;return t.__generator(this,function(t){switch(t.label){case 0:if(i.Arg.isRequired(u,"url"),i.Arg.isRequired(f,"transferFormat"),i.Arg.isIn(f,r.TransferFormat,"transferFormat"),typeof EventSource=="undefined")throw new Error("'EventSource' is not supported in your environment.");return this.logger.log(n.LogLevel.Trace,"(SSE transport) Connecting"),[4,this.accessTokenFactory()];case 1:return o=t.sent(),o&&(u+=(u.indexOf("?")<0?"?":"&")+("access_token="+encodeURIComponent(o))),this.url=u,[2,new Promise(function(t,o){var h=!1,s;f!==r.TransferFormat.Text&&o(new Error("The Server-Sent Events transport only supports the 'Text' transfer format"));s=new EventSource(u,{withCredentials:!0});try{s.onmessage=function(t){if(e.onreceive)try{e.logger.log(n.LogLevel.Trace,"(SSE transport) data received. "+i.getDataDetail(t.data,e.logMessageContent)+".");e.onreceive(t.data)}catch(r){if(e.onclose)e.onclose(r);return}};s.onerror=function(n){var t=new Error(n.message||"Error occurred");h?e.close(t):o(t)};s.onopen=function(){e.logger.log(n.LogLevel.Information,"SSE connected to "+e.url);e.eventSource=s;h=!0;t()}}catch(c){return Promise.reject(c)}})]}})})},u.prototype.send=function(n){return t.__awaiter(this,void 0,void 0,function(){return t.__generator(this,function(){return this.eventSource?[2,i.sendMessage(this.logger,"SSE",this.httpClient,this.url,this.accessTokenFactory,n,this.logMessageContent)]:[2,Promise.reject(new Error("Cannot send until the transport is connected"))]})})},u.prototype.stop=function(){return this.close(),Promise.resolve()},u.prototype.close=function(n){if(this.eventSource&&(this.eventSource.close(),this.eventSource=null,this.onclose))this.onclose(n)},u}();f.ServerSentEventsTransport=e});e(b);hi=b.ServerSentEventsTransport;k=f(function(u,f){Object.defineProperty(f,"__esModule",{value:!0});var e=function(){function u(n,t,i){this.logger=t;this.accessTokenFactory=n||function(){return null};this.logMessageContent=i}return u.prototype.connect=function(u,f){return t.__awaiter(this,void 0,void 0,function(){var e=this,o;return t.__generator(this,function(t){switch(t.label){case 0:if(i.Arg.isRequired(u,"url"),i.Arg.isRequired(f,"transferFormat"),i.Arg.isIn(f,r.TransferFormat,"transferFormat"),typeof WebSocket=="undefined")throw new Error("'WebSocket' is not supported in your environment.");return this.logger.log(n.LogLevel.Trace,"(WebSockets transport) Connecting"),[4,this.accessTokenFactory()];case 1:return o=t.sent(),o&&(u+=(u.indexOf("?")<0?"?":"&")+("access_token="+encodeURIComponent(o))),[2,new Promise(function(t,o){u=u.replace(/^http/,"ws");var s=new WebSocket(u);f===r.TransferFormat.Binary&&(s.binaryType="arraybuffer");s.onopen=function(){e.logger.log(n.LogLevel.Information,"WebSocket connected to "+u);e.webSocket=s;t()};s.onerror=function(n){o(n.error)};s.onmessage=function(t){if(e.logger.log(n.LogLevel.Trace,"(WebSockets transport) data received. "+i.getDataDetail(t.data,e.logMessageContent)+"."),e.onreceive)e.onreceive(t.data)};s.onclose=function(t){if(e.logger.log(n.LogLevel.Trace,"(WebSockets transport) socket closed."),e.onclose)if(t.wasClean===!1||t.code!==1e3)e.onclose(new Error("Websocket closed with status code: "+t.code+" ("+t.reason+")"));else e.onclose()}})]}})})},u.prototype.send=function(t){return this.webSocket&&this.webSocket.readyState===WebSocket.OPEN?(this.logger.log(n.LogLevel.Trace,"(WebSockets transport) sending data. "+i.getDataDetail(t,this.logMessageContent)+"."),this.webSocket.send(t),Promise.resolve()):Promise.reject("WebSocket is not in the OPEN state")},u.prototype.stop=function(){return this.webSocket&&(this.webSocket.close(),this.webSocket=null),Promise.resolve()},u}();f.WebSocketTransport=e});e(k);ci=k.WebSocketTransport;d=f(function(u,f){function s(n,t){return!n||(t&n)!=0}Object.defineProperty(f,"__esModule",{value:!0});var e=100,o=function(){function u(n,t){t===void 0&&(t={});this.features={};i.Arg.isRequired(n,"url");this.logger=i.createLogger(t.logger);this.baseUrl=this.resolveUrl(n);t=t||{};t.accessTokenFactory=t.accessTokenFactory||function(){return null};t.logMessageContent=t.logMessageContent||!1;this.httpClient=t.httpClient||new h.DefaultHttpClient(this.logger);this.connectionState=2;this.options=t}return u.prototype.start=function(t){return(t=t||r.TransferFormat.Binary,i.Arg.isIn(t,r.TransferFormat,"transferFormat"),this.logger.log(n.LogLevel.Debug,"Starting connection with transfer format '"+r.TransferFormat[t]+"'."),this.connectionState!==2)?Promise.reject(new Error("Cannot start a connection that is not in the 'Disconnected' state.")):(this.connectionState=0,this.startPromise=this.startInternal(t),this.startPromise)},u.prototype.send=function(n){if(this.connectionState!==1)throw new Error("Cannot send data if the connection is not in the 'Connected' State.");return this.transport.send(n)},u.prototype.stop=function(n){return t.__awaiter(this,void 0,void 0,function(){var i;return t.__generator(this,function(t){switch(t.label){case 0:this.connectionState=2;t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.startPromise];case 2:return t.sent(),[3,4];case 3:return i=t.sent(),[3,4];case 4:return this.transport?(this.stopError=n,[4,this.transport.stop()]):[3,6];case 5:t.sent();this.transport=null;t.label=6;case 6:return[2]}})})},u.prototype.startInternal=function(i){return t.__awaiter(this,void 0,void 0,function(){var a=this,f,u,o,l,s,h,c;return t.__generator(this,function(y){switch(y.label){case 0:f=this.baseUrl;this.accessTokenFactory=this.options.accessTokenFactory;y.label=1;case 1:return(y.trys.push([1,12,,13]),!this.options.skipNegotiation)?[3,5]:(this.options.transport===r.HttpTransportType.WebSockets)?(this.transport=this.constructTransport(r.HttpTransportType.WebSockets),[4,this.transport.connect(f,i)]):[3,3];case 2:return y.sent(),[3,4];case 3:throw Error("Negotiation can only be skipped when using the WebSocket transport directly.");case 4:return[3,11];case 5:u=null;o=0;l=function(){var n;return t.__generator(this,function(t){switch(t.label){case 0:return[4,s.getNegotiationResponse(f)];case 1:return(u=t.sent(),s.connectionState===2)?[2,{value:void 0}]:(u.url&&(f=u.url),u.accessToken&&(n=u.accessToken,s.accessTokenFactory=function(){return n}),o++,[2])}})};s=this;y.label=6;case 6:return[5,l()];case 7:if(h=y.sent(),typeof h=="object")return[2,h.value];y.label=8;case 8:if(u.url&&o<e)return[3,6];y.label=9;case 9:if(o===e&&u.url)throw Error("Negotiate redirection limit exceeded.");return[4,this.createTransport(f,this.options.transport,u,i)];case 10:y.sent();y.label=11;case 11:return this.transport instanceof v.LongPollingTransport&&(this.features.inherentKeepAlive=!0),this.transport.onreceive=this.onreceive,this.transport.onclose=function(n){return a.stopConnection(n)},this.changeState(0,1),[3,13];case 12:c=y.sent();this.logger.log(n.LogLevel.Error,"Failed to start the connection: "+c);this.connectionState=2;this.transport=null;throw c;case 13:return[2]}})})},u.prototype.getNegotiationResponse=function(i){return t.__awaiter(this,void 0,void 0,function(){var u,s,f,r,e,o;return t.__generator(this,function(t){switch(t.label){case 0:return[4,this.accessTokenFactory()];case 1:u=t.sent();u&&(s=(o={},o.Authorization="Bearer "+u,o));f=this.resolveNegotiateUrl(i);this.logger.log(n.LogLevel.Debug,"Sending negotiation request: "+f);t.label=2;case 2:return t.trys.push([2,4,,5]),[4,this.httpClient.post(f,{content:"",headers:s})];case 3:if(r=t.sent(),r.statusCode!==200)throw Error("Unexpected status code returned from negotiate "+r.statusCode);return[2,JSON.parse(r.content)];case 4:e=t.sent();this.logger.log(n.LogLevel.Error,"Failed to complete negotiation with the server: "+e);throw e;case 5:return[2]}})})},u.prototype.createConnectUrl=function(n,t){return n+(n.indexOf("?")===-1?"?":"&")+("id="+t)},u.prototype.createTransport=function(i,u,f,e){return t.__awaiter(this,void 0,void 0,function(){var o,l,s,c,a,h,v;return t.__generator(this,function(t){switch(t.label){case 0:return(o=this.createConnectUrl(i,f.connectionId),!this.isITransport(u))?[3,2]:(this.logger.log(n.LogLevel.Debug,"Connection was provided an instance of ITransport, using that directly."),this.transport=u,[4,this.transport.connect(o,e)]);case 1:return t.sent(),this.changeState(0,1),[2];case 2:l=f.availableTransports;s=0;c=l;t.label=3;case 3:return(s<c.length)?(a=c[s],this.connectionState=0,h=this.resolveTransport(a,u,e),!(typeof h=="number"))?[3,8]:(this.transport=this.constructTransport(h),!(f.connectionId===null))?[3,5]:[4,this.getNegotiationResponse(i)]:[3,9];case 4:f=t.sent();o=this.createConnectUrl(i,f.connectionId);t.label=5;case 5:return t.trys.push([5,7,,8]),[4,this.transport.connect(o,e)];case 6:return t.sent(),this.changeState(0,1),[2];case 7:return v=t.sent(),this.logger.log(n.LogLevel.Error,"Failed to start the transport '"+r.HttpTransportType[h]+"': "+v),this.connectionState=2,f.connectionId=null,[3,8];case 8:return s++,[3,3];case 9:throw new Error("Unable to initialize any of the available transports.");}})})},u.prototype.constructTransport=function(n){switch(n){case r.HttpTransportType.WebSockets:return new k.WebSocketTransport(this.accessTokenFactory,this.logger,this.options.logMessageContent);case r.HttpTransportType.ServerSentEvents:return new b.ServerSentEventsTransport(this.httpClient,this.accessTokenFactory,this.logger,this.options.logMessageContent);case r.HttpTransportType.LongPolling:return new v.LongPollingTransport(this.httpClient,this.accessTokenFactory,this.logger,this.options.logMessageContent);default:throw new Error("Unknown transport: "+n+".");}},u.prototype.resolveTransport=function(t,i,u){var f=r.HttpTransportType[t.transport],e;if(f===null||f===undefined)this.logger.log(n.LogLevel.Debug,"Skipping transport '"+t.transport+"' because it is not supported by this client.");else if(e=t.transferFormats.map(function(n){return r.TransferFormat[n]}),s(i,f))if(e.indexOf(u)>=0)if(f===r.HttpTransportType.WebSockets&&typeof WebSocket=="undefined"||f===r.HttpTransportType.ServerSentEvents&&typeof EventSource=="undefined")this.logger.log(n.LogLevel.Debug,"Skipping transport '"+r.HttpTransportType[f]+"' because it is not supported in your environment.'");else return this.logger.log(n.LogLevel.Debug,"Selecting transport '"+r.HttpTransportType[f]+"'"),f;else this.logger.log(n.LogLevel.Debug,"Skipping transport '"+r.HttpTransportType[f]+"' because it does not support the requested transfer format '"+r.TransferFormat[u]+"'.");else this.logger.log(n.LogLevel.Debug,"Skipping transport '"+r.HttpTransportType[f]+"' because it was disabled by the client.");return null},u.prototype.isITransport=function(n){return n&&typeof n=="object"&&"connect"in n},u.prototype.changeState=function(n,t){return this.connectionState===n?(this.connectionState=t,!0):!1},u.prototype.stopConnection=function(i){return t.__awaiter(this,void 0,void 0,function(){return t.__generator(this,function(){if(this.transport=null,i=this.stopError||i,i?this.logger.log(n.LogLevel.Error,"Connection disconnected with error '"+i+"'."):this.logger.log(n.LogLevel.Information,"Connection disconnected."),this.connectionState=2,this.onclose)this.onclose(i);return[2]})})},u.prototype.resolveUrl=function(t){if(t.lastIndexOf("https://",0)===0||t.lastIndexOf("http://",0)===0)return t;if(typeof window=="undefined"||!window||!window.document)throw new Error("Cannot resolve '"+t+"'.");var i=window.document.createElement("a");return i.href=t,this.logger.log(n.LogLevel.Information,"Normalizing '"+t+"' to '"+i.href+"'."),i.href},u.prototype.resolveNegotiateUrl=function(n){var i=n.indexOf("?"),t=n.substring(0,i===-1?n.length:i);return t[t.length-1]!=="/"&&(t+="/"),t+="negotiate",t+(i===-1?"":n.substring(i))},u}();f.HttpConnection=o});e(d);li=d.HttpConnection;y=f(function(t,i){Object.defineProperty(i,"__esModule",{value:!0});var f="json",e=function(){function t(){this.name=f;this.version=1;this.transferFormat=r.TransferFormat.Text}return t.prototype.parseMessages=function(t,i){var s,e,f,o,h,r;if(typeof t!="string")throw new Error("Invalid input for JSON hub protocol. Expected a string.");if(!t)return[];for(i===null&&(i=l.NullLogger.instance),s=c.TextMessageFormat.parse(t),e=[],f=0,o=s;f<o.length;f++){if(h=o[f],r=JSON.parse(h),typeof r.type!="number")throw new Error("Invalid payload.");switch(r.type){case u.MessageType.Invocation:this.isInvocationMessage(r);break;case u.MessageType.StreamItem:this.isStreamItemMessage(r);break;case u.MessageType.Completion:this.isCompletionMessage(r);break;case u.MessageType.Ping:break;case u.MessageType.Close:break;default:i.log(n.LogLevel.Information,"Unknown message type '"+r.type+"' ignored.");continue}e.push(r)}return e},t.prototype.writeMessage=function(n){return c.TextMessageFormat.write(JSON.stringify(n))},t.prototype.isInvocationMessage=function(n){this.assertNotEmptyString(n.target,"Invalid payload for Invocation message.");n.invocationId!==undefined&&this.assertNotEmptyString(n.invocationId,"Invalid payload for Invocation message.")},t.prototype.isStreamItemMessage=function(n){if(this.assertNotEmptyString(n.invocationId,"Invalid payload for StreamItem message."),n.item===undefined)throw new Error("Invalid payload for StreamItem message.");},t.prototype.isCompletionMessage=function(n){if(n.result&&n.error)throw new Error("Invalid payload for Completion message.");!n.result&&n.error&&this.assertNotEmptyString(n.error,"Invalid payload for Completion message.");this.assertNotEmptyString(n.invocationId,"Invalid payload for Completion message.")},t.prototype.assertNotEmptyString=function(n,t){if(typeof n!="string"||n==="")throw new Error(t);},t}();i.JsonHubProtocol=e});e(y);ai=y.JsonHubProtocol;g=f(function(n,t){function u(n){return n.log!==undefined}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function n(){}return n.prototype.configureLogging=function(n){return i.Arg.isRequired(n,"logging"),this.logger=u(n)?n:new i.ConsoleLogger(n),this},n.prototype.withUrl=function(n,t){return i.Arg.isRequired(n,"url"),this.url=n,this.httpConnectionOptions=typeof t=="object"?t:{transport:t},this},n.prototype.withHubProtocol=function(n){return i.Arg.isRequired(n,"protocol"),this.protocol=n,this},n.prototype.build=function(){var n=this.httpConnectionOptions||{},t;if(n.logger===undefined&&(n.logger=this.logger),!this.url)throw new Error("The 'HubConnectionBuilder.withUrl' method must be called before building the connection.");return t=new d.HttpConnection(this.url,n),w.HubConnection.create(t,this.logger||l.NullLogger.instance,this.protocol||new y.JsonHubProtocol)},n}();t.HubConnectionBuilder=r});e(g);vi=g.HubConnectionBuilder;o=f(function(t,i){Object.defineProperty(i,"__esModule",{value:!0});i.VERSION="0.0.0-DEV_BUILD";i.HttpError=s.HttpError;i.TimeoutError=s.TimeoutError;i.DefaultHttpClient=h.DefaultHttpClient;i.HttpClient=h.HttpClient;i.HttpResponse=h.HttpResponse;i.HubConnection=w.HubConnection;i.HubConnectionBuilder=g.HubConnectionBuilder;i.MessageType=u.MessageType;i.LogLevel=n.LogLevel;i.HttpTransportType=r.HttpTransportType;i.TransferFormat=r.TransferFormat;i.NullLogger=l.NullLogger;i.JsonHubProtocol=y.JsonHubProtocol});e(o);var cr=o.VERSION,lr=o.HttpError,ar=o.TimeoutError,vr=o.DefaultHttpClient,yr=o.HttpClient,pr=o.HttpResponse,wr=o.HubConnection,br=o.HubConnectionBuilder,kr=o.MessageType,dr=o.LogLevel,gr=o.HttpTransportType,nu=o.TransferFormat,tu=o.NullLogger,iu=o.JsonHubProtocol,yi=f(function(n,i){Object.defineProperty(i,"__esModule",{value:!0});Uint8Array.prototype.indexOf||Object.defineProperty(Uint8Array.prototype,"indexOf",{value:Array.prototype.indexOf,writable:!0});Uint8Array.prototype.slice||Object.defineProperty(Uint8Array.prototype,"slice",{value:Array.prototype.slice,writable:!0});Uint8Array.prototype.forEach||Object.defineProperty(Uint8Array.prototype,"forEach",{value:Array.prototype.forEach,writable:!0});t.__exportStar(o,i)});return e(yi)});!function(n){n(["jquery"],function(n){return function(){function v(n,t,r){return u({type:f.error,iconClass:i().iconClasses.error,message:n,optionsOverride:r,title:t})}function r(r,u){return r||(r=i()),t=n("#"+r.containerId),t.length?t:(u&&(t=nt(r)),t)}function y(n,t,r){return u({type:f.info,iconClass:i().iconClasses.info,message:n,optionsOverride:r,title:t})}function p(n){o=n}function w(n,t,r){return u({type:f.success,iconClass:i().iconClasses.success,message:n,optionsOverride:r,title:t})}function b(n,t,r){return u({type:f.warning,iconClass:i().iconClasses.warning,message:n,optionsOverride:r,title:t})}function k(n,u){var f=i();t||r(f);h(n,f,u)||g(f)}function d(u){var f=i();return t||r(f),u&&0===n(":focus",u).length?void e(u):void(t.children().length&&t.remove())}function g(i){for(var u=t.children(),r=u.length-1;r>=0;r--)h(n(u[r]),i)}function h(t,i,r){var u=!(!r||!r.force)&&r.force;return!(!t||!u&&0!==n(":focus",t).length)&&(t[i.hideMethod]({duration:i.hideDuration,easing:i.hideEasing,complete:function(){e(t)}}),!0)}function nt(i){return t=n("<div/>").attr("id",i.containerId).addClass(i.positionClass),t.appendTo(n(i.target)),t}function tt(){return{tapToDismiss:!0,toastClass:"toast",containerId:"toast-container",debug:!1,showMethod:"fadeIn",showDuration:300,showEasing:"swing",onShown:void 0,hideMethod:"fadeOut",hideDuration:1e3,hideEasing:"swing",onHidden:void 0,closeMethod:!1,closeDuration:!1,closeEasing:!1,closeOnHover:!0,extendedTimeOut:1e3,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},iconClass:"toast-info",positionClass:"toast-top-right",timeOut:5e3,titleClass:"toast-title",messageClass:"toast-message",escapeHtml:!1,target:"body",closeHtml:'<button type="button">&times;<\/button>',closeClass:"toast-close-button",newestOnTop:!0,preventDuplicates:!1,progressBar:!1,progressClass:"toast-progress",rtl:!1}}function c(n){o&&o(n)}function u(u){function k(n){return null==n&&(n=""),n.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function nt(){ut();et();ot();st();ht();ct();ft();tt()}function tt(){var n="";switch(u.iconClass){case"toast-success":case"toast-info":n="polite";break;default:n="assertive"}o.attr("aria-live",n)}function it(){f.closeOnHover&&o.hover(vt,at);!f.onclick&&f.tapToDismiss&&o.click(v);f.closeButton&&p&&p.click(function(n){n.stopPropagation?n.stopPropagation():void 0!==n.cancelBubble&&n.cancelBubble!==!0&&(n.cancelBubble=!0);f.onCloseClick&&f.onCloseClick(n);v(!0)});f.onclick&&o.click(function(n){f.onclick(n);v()})}function rt(){o.hide();o[f.showMethod]({duration:f.showDuration,easing:f.showEasing,complete:f.onShown});f.timeOut>0&&(y=setTimeout(v,f.timeOut),h.maxHideTime=parseFloat(f.timeOut),h.hideEta=(new Date).getTime()+h.maxHideTime,f.progressBar&&(h.intervalId=setInterval(yt,10)))}function ut(){u.iconClass&&o.addClass(f.toastClass).addClass(w)}function ft(){f.newestOnTop?t.prepend(o):t.append(o)}function et(){if(u.title){var n=u.title;f.escapeHtml&&(n=k(u.title));d.append(n).addClass(f.titleClass);o.append(d)}}function ot(){if(u.message){var n=u.message;f.escapeHtml&&(n=k(u.message));g.append(n).addClass(f.messageClass);o.append(g)}}function st(){f.closeButton&&(p.addClass(f.closeClass).attr("role","button"),o.prepend(p))}function ht(){f.progressBar&&(b.addClass(f.progressClass),o.prepend(b))}function ct(){f.rtl&&o.addClass("rtl")}function lt(n,t){if(n.preventDuplicates){if(t.message===s)return!0;s=t.message}return!1}function v(t){var i=t&&f.closeMethod!==!1?f.closeMethod:f.hideMethod,r=t&&f.closeDuration!==!1?f.closeDuration:f.hideDuration,u=t&&f.closeEasing!==!1?f.closeEasing:f.hideEasing;if(!n(":focus",o).length||t)return clearTimeout(h.intervalId),o[i]({duration:r,easing:u,complete:function(){e(o);clearTimeout(y);f.onHidden&&"hidden"!==a.state&&f.onHidden();a.state="hidden";a.endTime=new Date;c(a)}})}function at(){(f.timeOut>0||f.extendedTimeOut>0)&&(y=setTimeout(v,f.extendedTimeOut),h.maxHideTime=parseFloat(f.extendedTimeOut),h.hideEta=(new Date).getTime()+h.maxHideTime)}function vt(){clearTimeout(y);h.hideEta=0;o.stop(!0,!0)[f.showMethod]({duration:f.showDuration,easing:f.showEasing})}function yt(){var n=(h.hideEta-(new Date).getTime())/h.maxHideTime*100;b.width(n+"%")}var f=i(),w=u.iconClass||f.iconClass;if("undefined"!=typeof u.optionsOverride&&(f=n.extend(f,u.optionsOverride),w=u.optionsOverride.iconClass||w),!lt(f,u)){l++;t=r(f,!0);var y=null,o=n("<div/>"),d=n("<div/>"),g=n("<div/>"),b=n("<div/>"),p=n(f.closeHtml),h={intervalId:null,hideEta:null,maxHideTime:null},a={toastId:l,state:"visible",startTime:new Date,options:f,map:u};return nt(),rt(),it(),c(a),f.debug&&console&&console.log(a),o}}function i(){return n.extend({},tt(),a.options)}function e(n){t||(t=r());n.is(":visible")||(n.remove(),n=null,0===t.children().length&&(t.remove(),s=void 0))}var t,o,s,l=0,f={error:"error",info:"info",success:"success",warning:"warning"},a={clear:k,remove:d,error:v,getContainer:r,info:y,options:{},subscribe:p,success:w,version:"2.1.3",warning:b};return a}()})}("function"==typeof define&&define.amd?define:function(n,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("jquery")):window.toastr=t(window.jQuery)});